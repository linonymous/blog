{{ define "main" }}
<article class="article">
  <header class="article-header">
    <div class="container container-narrow">
      <div class="article-meta">
        <a href="{{ printf "%s/" .Section | relURL }}" class="article-category article-category-{{ .Section }}">{{ .Section | title }}</a>
        <span class="article-meta-sep">·</span>
        <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
        <span class="article-meta-sep">·</span>
        <span class="reading-time">{{ math.Round (div (countwords .Content) 200.0) }} min read</span>
      </div>
      <h1 class="article-title">{{ .Title }}</h1>
      {{ with .Description }}
      <p class="article-description">{{ . }}</p>
      {{ end }}
      {{ with .Params.tags }}
      <div class="article-tags">
        {{ range . }}
        <a href="{{ printf "tags/%s/" (. | urlize) | relURL }}" class="tag">{{ . }}</a>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </header>

  <div class="article-content">
    <div class="container container-narrow">
      {{ .Content }}
    </div>
  </div>

  <footer class="article-footer">
    <div class="container container-narrow">
      {{ with .Params.series }}
      <div class="article-series">
        <h4>Part of the "{{ . }}" series</h4>
        <ul>
          {{ $series := . }}
          {{ range where $.Site.RegularPages "Params.series" $series }}
          <li {{ if eq $.Permalink .Permalink }}class="current"{{ end }}>
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </li>
          {{ end }}
        </ul>
      </div>
      {{ end }}

      <nav class="article-nav">
        {{ with .PrevInSection }}
        <a href="{{ .Permalink }}" class="article-nav-link article-nav-prev">
          <span class="article-nav-label">← Previous</span>
          <span class="article-nav-title">{{ .Title }}</span>
        </a>
        {{ end }}
        {{ with .NextInSection }}
        <a href="{{ .Permalink }}" class="article-nav-link article-nav-next">
          <span class="article-nav-label">Next →</span>
          <span class="article-nav-title">{{ .Title }}</span>
        </a>
        {{ end }}
      </nav>
    </div>
  </footer>
</article>
{{ end }}
